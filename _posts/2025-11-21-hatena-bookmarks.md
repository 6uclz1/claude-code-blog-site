---
layout: post
title: "はてなブックマーク 2025年11月21日 の記事まとめ (4件)"
date: 2025-11-22 08:14:25 +0900
excerpt: "はてなブックマークで気になった記事をAIで要約してお届けします。2025年11月21日分の4件の記事をまとめました。

- AWS Lambdaでテナントまたはエンドユーザー単位の実行環境分離が可能に

- 『論理削除の絞り込みはWHERE句でやるな』へのコメント

- 【爆速】ECS Fargateタスクを踏み台にしてRDSへ安全に接続

- AWS CLIの 新機能 aws login コマンドを試してみた | DevelopersIO
"
---

はてなブックマークで気になった記事をAIで要約してお届けします。
2025年11月21日分の4件の記事をまとめました。

## 1. AWS Lambdaでテナントまたはエンドユーザー単位の実行環境分離が可能に

**URL:** [https://codezine.jp/news/detail/22639](https://codezine.jp/news/detail/22639)

### AI要約

**要点**
*   AWS Lambdaに新機能「テナント分離モード」が追加されました。
*   これにより、1つのLambda関数内でテナントまたはエンドユーザーごとの実行環境を独立させることが可能になります。
*   各テナントのデータや処理を厳密に分離し、セキュリティを強化しながら、マルチテナントSaaSの開発・運用負荷を軽減します。

**詳細な要約**
AWSは、サーバーレスコンピューティングサービスであるAWS Lambdaに「テナント分離モード」という新機能を導入すると発表しました。この機能は、マルチテナントアプリケーションにおける長年の課題を解決することを目的としています。これまで、複数の顧客（テナント）が共有するアプリケーションで、それぞれのテナントのコードやデータを安全に分離するには、テナントごとにLambda関数を複数デプロイするか、関数内に複雑な分離ロジックを独自に実装する必要がありました。

新しいテナント分離モードでは、開発者はLambdaコンソールの設定を有効にするだけで、一つのLambda関数内でテナントまたはエンドユーザー単位に専用の実行環境を割り当てることができます。これにより、各テナントのデータや処理が他のテナントと混ざることなく厳密に分離され、高いセキュリティ要件にも容易に対応できるようになります。

特に、マルチテナントSaaSプラットフォームでの利用が想定されており、この機能によってアプリケーションの実装や運用管理の負担が大幅に軽減されます。また、同一テナント内では環境の再利用が行われるため、パフォーマンスも維持されます。料金は分離された環境ごとに課金され、日本を含むほとんどの商用リージョンで利用可能です。このモードは、セキュアで効率的なマルチテナントサービスの構築を強力に支援する画期的な機能と言えます。

---

## 2. 『論理削除の絞り込みはWHERE句でやるな』へのコメント

**URL:** [https://b.hatena.ne.jp/entry/s/zenn.dev/levtech/articles/squeeze-on-join-on](https://b.hatena.ne.jp/entry/s/zenn.dev/levtech/articles/squeeze-on-join-on)

### AI要約

**要点:**
*   SQLのLEFT JOINで関連テーブルの論理削除レコードをWHERE句で絞ると、親テーブルのレコードまで意図せず除外される問題がある。
*   この問題を避けるには、論理削除の条件をJOIN句（ON句）に記述し、SQLの評価順序を考慮したクエリ作成が不可欠である。
*   論理削除フラグの設計や、データベースのテーブル設計そのものに関する議論も提起されている。

**詳細な要約:**
この記事は、Zenn.devで公開された「論理削除の絞り込みはWHERE句でやるな」という記事に対する、はてなブックマークのコメントをまとめたものです。元の記事は、SQLで複数のテーブルをLEFT JOINで結合し、子テーブルの論理削除レコードを除外する際にWHERE句で条件を指定すると、親テーブルのレコードまで意図せず除外されてしまう問題を指摘しています。

これは、SQLにおける結合とWHERE句の評価順序に起因します。LEFT JOINの後でWHERE句が適用されるため、子テーブルにマッチしない親テーブルの行もフィルタリング対象となり、結果的にINNER JOINに近い動作をしてしまいます。そのため、論理削除の条件はLEFT JOINのON句に含めるべきだと提案されています。ON句の条件は結合時に適用され、親テーブルの全レコードを保持しつつ、子テーブルの論理削除レコードのみを除外できます。

コメントでは、この問題がSQLの評価順序理解の重要性を示すとの指摘が多く、論理削除フラグの適切なデータ型や、より良いデータベース設計（テーブル分割など）についても議論されました。これらの意見は、開発者がデータベース操作を行う上で、SQLの基礎知識と設計思想の重要性を再認識させるものです。

---

## 3. 【爆速】ECS Fargateタスクを踏み台にしてRDSへ安全に接続

**URL:** [https://zenn.dev/zuzuzu/articles/aws_ecs_exec_db_access](https://zenn.dev/zuzuzu/articles/aws_ecs_exec_db_access)

### AI要約

**要点**
- ECS Fargateタスクを中継地点（踏み台）として利用し、Amazon RDSへ安全に接続する方法を紹介。
- AWS ECS Exec機能とAWS Systems Manager (SSM) Session Managerを組み合わせて実現。
- ローカルのDBクライアントから、インターネットに非公開のRDSにセキュアにアクセス可能。

**詳細な要約**
この記事は、AWSのECS Fargateタスクを「踏み台」として活用し、Amazon RDSデータベースにローカルのDBクライアントから安全に接続する実践的な方法を解説しています。主な目的は、RDSをインターネットに公開することなく、開発者が手元の環境からセキュアにデータベースへアクセスできるようにすることです。

これを実現するため、記事ではECS Exec機能とAWS Systems Manager (SSM) Session Managerを組み合わせて利用します。これにより、Fargateタスクを介してローカルPCからRDSへのポートフォワーディング（指定したポートを別のサーバーのポートに転送する技術）が可能になります。

具体的な手順として、まず必要なAWS CLIの権限とツール（Session Manager pluginなど）を準備します。次に、ECS Fargateタスク側でECS Execを有効化し、SSMエージェントの設定や適切なIAMロール（`AmazonSSMManagedInstanceCore`）の付与を行います。RDSのセキュリティグループも、ECSタスクからのアクセスを許可するように設定します。

これらの準備が整った後、記事では実行中のECSタスク情報やRDSのエンドポイントを抽出し、SSM Session Managerコマンドを使ってポートフォワーディングを開始します。これにより、ローカルPCの特定のポート（例: 13306）がRDSのデータベースポート（例: MySQLの3306）に接続されます。最後に、Sequel AceやTablePlusなどの任意のDBクライアントから「localhost」とローカルポートを指定してRDSに接続し、作業完了後にセッションを終了するまでの一連の流れが詳細に説明されており、セキュリティを確保しつつ開発効率を高めるための有用なガイドとなっています。

---

## 4. AWS CLIの 新機能 aws login コマンドを試してみた | DevelopersIO

**URL:** [https://dev.classmethod.jp/articles/aws-cli-aws-login/](https://dev.classmethod.jp/articles/aws-cli-aws-login/)

### AI要約

**要点:**
*   AWS CLIに、ブラウザベースで認証する新コマンド「aws login」が登場。
*   アクセスキーのローカル保存が不要になり、AWSマネジメントコンソールにログイン済みのセッションをCLIに活用可能。
*   これにより、セキュリティが向上し、MFA必須ユーザーやスイッチロール利用者も手軽にCLIを使えるようになる。

**詳細な要約:**
2025年11月19日にリリースされたAWS CLIの新機能「aws login」は、開発者のAWS CLI利用における認証を簡素化し、セキュリティを高める画期的なコマンドです。AWS CLIバージョン2.32.0以降で利用可能で、長期的なアクセスキーを開発用端末に保存する必要がなくなります。

このコマンドを実行すると、OSのデフォルトブラウザが自動的に起動し、すでにAWSマネジメントコンソールにログイン済みのセッション（IAMユーザーやスイッチロール先）を利用して認証を行うことができます。MFA（多要素認証）必須のIAMユーザーや、普段から複数のAWSアカウントをスイッチロールで管理しているユーザーにとって、ブラウザの認証情報をそのままCLIに持ち込めるため、非常に便利です。記事では、AWS CLIのアップデートから`aws login`コマンドの実行、リージョン指定、ブラウザでの認証、そして`aws sts get-caller-identity`コマンドによる動作確認までの一連の流れを詳細に解説しています。アクセスキーやシークレットキーの管理負担を軽減し、情報漏洩のリスクを減らすため、既存のアクセスキー運用から「aws login」への切り替えが推奨されています。

---

*この記事は、はてなブックマークのRSSフィードから自動生成されました。*  
*要約はAI（Gemini）によって生成されており、元記事の内容を正確に反映していない場合があります。*  
*詳細な内容については、各URLから元記事をご確認ください。*
