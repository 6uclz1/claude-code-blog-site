---
layout: post
title: "はてなブックマーク 2025年07月30日 の記事まとめ (1件)"
date: 2025-07-31 08:15:44 +0900
excerpt: "## 要点

*   論理削除は、リソース（データ）の状態を「アクティブ」と「削除済み」の「サブタイプ」として区別し、データ不変性の観点からイベントと分離して設計する。
*   削除は単なるフラグではなく、「登録抹消」や「BAN」といった具体的な「業務イベント」として記録する。リソースに削除日時を持たせるのは避ける。
*   データベース実装では、「シングルテーブル継承」（削除フラグ方式）のデメリ..."
---

はてなブックマークで気になった記事をAIで要約してお届けします。
2025年07月30日分の1件の記事をまとめました。

## 1. 論理削除 - kawasima

**URL:** [https://scrapbox.io/kawasima/%E8%AB%96%E7%90%86%E5%89%8A%E9%99%A4](https://scrapbox.io/kawasima/%E8%AB%96%E7%90%86%E5%89%8A%E9%99%A4)

### AI要約

## 要点

*   論理削除は、リソース（データ）の状態を「アクティブ」と「削除済み」の「サブタイプ」として区別し、データ不変性の観点からイベントと分離して設計する。
*   削除は単なるフラグではなく、「登録抹消」や「BAN」といった具体的な「業務イベント」として記録する。リソースに削除日時を持たせるのは避ける。
*   データベース実装では、「シングルテーブル継承」（削除フラグ方式）のデメリットを理解し、「具象テーブル継承」など他の方法も検討し、トレードオフを理解した選択が必要。

## 詳細な要約

「論理削除」は、データを完全に消さずにアクセスを制限する設計手法です。この記事では、この概念を不変なデータモデル（イミュータブルデータモデル）の基本を学ぶ良い題材として解説しています。

まず、ユーザーなどのリソースが「アクティブ」と「削除済み」で扱いが異なる場合、これらを明確に異なるサブタイプとして区別することを推奨します。例えば、削除ユーザーからは個人情報を削除するなど、保持する属性にも差を設ける設計を提示しています。

次に、削除を単なる状態変更ではなく、業務上の「イベント」として捉えることの重要性を強調します。ユーザー退会の「登録抹消」や、管理者による「BAN」など、具体的なイベントとして記録することで、削除の理由や背景を詳細に保存できます。リソース自体に削除日時などの情報を直接持たせることは、イベントとリソースの混同を招くため、避けるべきだと指摘しています。

データベース実装については、一般的な「削除フラグ」を用いる「シングルテーブル継承」は、検索性能の劣化やデータ一意性制約の困難さなど多くのデメリットがあると説明しています。これに対し、サブタイプごとに独立したテーブルを持つ「具象テーブル継承」など、別の選択肢も検討し、それぞれの利点と欠点を理解した上で慎重に選ぶべきだと結論付けています。

---

*この記事は、はてなブックマークのRSSフィードから自動生成されました。*  
*要約はAI（Gemini）によって生成されており、元記事の内容を正確に反映していない場合があります。*  
*詳細な内容については、各URLから元記事をご確認ください。*
